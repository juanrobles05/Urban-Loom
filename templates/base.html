{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Urban Loom{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'css/output.css' %}">
</head>
<body class="bg-black text-white">


<!-- Header -->
<header class="sticky top-0 z-50 bg-black backdrop-blur border-b border-gray-700">
    <div class="container mx-auto px-4 py-4">
        <div class="flex items-center justify-between">
            <!-- Logo -->
            <a href="{% url 'home' %}" class="text-2xl font-bold tracking-tight text-white">URBAN LOOM</a>

            <!-- Navigation -->
            <nav class="hidden lg:flex items-center space-x-8">
                <a href="" class="text-sm font-medium hover:text-gray-300 transition-colors">Shop</a>
                <a href="{% url 'catalog:collections' %}" class="text-sm font-medium hover:text-gray-300 transition-colors">Collections</a>
                <a href="" class="text-sm font-medium hover:text-white transition-colors text-white">Sale</a>
                <a href="{% url 'core:about' %}" class="text-sm font-medium hover:text-gray-300 transition-colors">About</a>
            </nav>

            <!-- Actions -->
            <div class="flex items-center space-x-4">
                {% if user.is_authenticated %}
                    <!-- Carrito de Compras -->
                    <a href="{% url 'orders:cart' %}" class="relative hover:text-gray-300 transition-colors" title="Carrito">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                                  d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m0 0L17 13m0 0l2.5 5M9 19.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5zM20.5 19.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"/>
                        </svg>
                        <span id="cart-count" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center hidden">0</span>
                    </a>
                    <a href="{% url 'orders:order_history' %}" class="text-sm font-medium hover:text-gray-300 transition-colors">Mis Órdenes</a>
                    <a href="{% url 'profile' %}" class="text-sm font-medium hover:text-gray-300 transition-colors">Perfil</a>
                    <a href="{% url 'logout' %}" class="text-sm font-medium hover:text-gray-300 transition-colors">Salir</a>
                {% else %}
                    <a href="{% url 'login' %}" class="text-sm font-medium hover:text-gray-300 transition-colors">Login</a>
                    <a href="{% url 'register' %}" class="text-sm font-medium hover:text-gray-300 transition-colors">Register</a>
                {% endif %}
            </div>
        </div>
    </div>
</header>

<main class="p-6">
    {% block content %}{% endblock %}
</main>


<!-- Footer -->
<footer class="bg-black border-t border-gray-700 mt-6">
    <div class="container mx-auto px-4 py-8">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-16">
            <!-- Brand -->
            <div class="space-y-4">
                <h3 class="text-2xl font-bold text-white">URBAN LOOM</h3>
                <p class="text-gray-300 text-sm leading-relaxed">Premium streetwear para la cultura urbana moderna. Prendas auténticas que definen tu estilo.</p>
                <div class="flex space-x-2">
                    <a href="#" class="hover:bg-gray-800 p-2 rounded-full"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="currentColor" viewBox="0 0 24 24"><path d="M7.75 2h8.5A5.75 5.75 0 0 1 22 7.75v8.5A5.75 5.75 0 0 1 16.25 22h-8.5A5.75 5.75 0 0 1 2 16.25v-8.5A5.75 5.75 0 0 1 7.75 2zm0 1.5A4.25 4.25 0 0 0 3.5 7.75v8.5A4.25 4.25 0 0 0 7.75 20.5h8.5A4.25 4.25 0 0 0 20.5 16.25v-8.5A4.25 4.25 0 0 0 16.25 3.5h-8.5zm4.25 3.25a5.25 5.25 0 1 1 0 10.5a5.25 5.25 0 0 1 0-10.5zm0 1.5a3.75 3.75 0 1 0 0 7.5a3.75 3.75 0 0 0 0-7.5zm6.25.75a1 1 0 1 1-2 0a1 1 0 0 1 2 0z"/></svg></a>
                    <a href="#" class="hover:bg-gray-800 p-2 rounded-full"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="currentColor" viewBox="0 0 24 24"><path d="M22.46 6c-.77.35-1.6.59-2.47.7a4.3 4.3 0 0 0 1.88-2.37c-.83.5-1.75.87-2.72 1.07A4.28 4.28 0 0 0 16.11 4c-2.37 0-4.29 1.92-4.29 4.29c0 .34.04.67.11.99C7.69 9.13 4.07 7.2 1.64 4.16c-.37.64-.58 1.38-.58 2.17c0 1.5.76 2.82 1.92 3.59c-.71-.02-1.38-.22-1.97-.54v.05c0 2.09 1.49 3.83 3.47 4.23c-.36.1-.74.16-1.13.16c-.28 0-.54-.03-.8-.08c.54 1.68 2.11 2.9 3.97 2.93A8.6 8.6 0 0 1 2 19.54c-.56 0-1.1-.03-1.63-.09A12.13 12.13 0 0 0 8.29 21c7.55 0 11.68-6.26 11.68-11.68c0-.18-.01-.36-.02-.54A8.18 8.18 0 0 0 22.46 6z"/></svg></a>
                    <a href="#" class="hover:bg-gray-800 p-2 rounded-full"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="currentColor" viewBox="0 0 24 24"><path d="M22.675 0h-21.35C.6 0 0 .6 0 1.326v21.348C0 23.4.6 24 1.326 24h11.495v-9.294H9.692v-3.622h3.129V8.413c0-3.1 1.893-4.788 4.659-4.788c1.325 0 2.463.099 2.797.143v3.24l-1.918.001c-1.504 0-1.797.715-1.797 1.763v2.313h3.587l-.467 3.622h-3.12V24h6.116C23.4 24 24 23.4 24 22.674V1.326C24 .6 23.4 0 22.675 0"/></svg></a>
                </div>
            </div>
            <!-- Shop -->
            <div class="space-y-4">
                <h4 class="font-semibold text-lg text-white">Shop</h4>
                <ul class="space-y-3 text-sm text-gray-300">
                    <li><a href="" class="hover:text-white transition-colors">Hoodies</a></li>
                    <li><a href="" class="hover:text-white transition-colors">Pants</a></li>
                    <li><a href="" class="hover:text-white transition-colors">Jackets</a></li>
                </ul>
            </div>
            <!-- Support -->
            <div class="space-y-4">
                <h4 class="font-semibold text-lg text-white">Support</h4>
                <ul class="space-y-3 text-sm text-gray-300">
                    <li><a href="" class="hover:text-white transition-colors">Contact Us</a></li>
                    <li><a href="" class="hover:text-white transition-colors">Size Guide</a></li>
                    <li><a href="" class="hover:text-white transition-colors">Returns & Exchanges</a></li>
                    <li><a href="" class="hover:text-white transition-colors">Shipping Info</a></li>
                    <li><a href="" class="hover:text-white transition-colors">FAQ</a></li>
                </ul>
            </div>
        </div>
        <div class="border-t border-gray-800 mt-8 pt-8 flex flex-col md:flex-row justify-between items-center space-y-2 md:space-y-0">
            <p class="text-sm text-gray-500">&copy; 2025 Urban Loom. All rights reserved.</p>
            <div class="flex space-x-6 text-sm text-gray-500">
                <a href="" class="hover:text-white transition-colors">Privacy Policy</a>
                <a href="" class="hover:text-white transition-colors">Terms of Service</a>
                <a href="" class="hover:text-white transition-colors">Cookie Policy</a>
            </div>
        </div>
    </div>
</footer>

<!-- Script para actualizar contador del carrito -->
<script>
function updateCartCount() {
    {% if user.is_authenticated %}
    fetch('/orders/cart-count/')
        .then(response => response.json())
        .then(data => {
            const cartCount = document.getElementById('cart-count');
            if (data.count > 0) {
                cartCount.textContent = data.count;
                cartCount.classList.remove('hidden');
            } else {
                cartCount.classList.add('hidden');
            }
        })
        .catch(error => console.error('Error:', error));
    {% endif %}
}

// Actualizar contador al cargar la página
document.addEventListener('DOMContentLoaded', updateCartCount);
</script>

</body>
</html>